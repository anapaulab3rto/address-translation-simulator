<div class="input-address">
  <h3>Inserir Endereço Virtual</h3>
  <div class="translate-row">
    <div class="proc-actions">
      Novo processo:
      <input type="text" [(ngModel)]="newProcessName" placeholder="Nome do processo" />
      <button (click)="createProcess()">Criar Processo</button>
    </div>
    <div>
      Processo:
      <label>
        <select [(ngModel)]="pid" (ngModelChange)="selectProcess()">
          @for (p of processes; track $index) {
          <option [value]="p.pid">PID {{p.pid}} — {{p.name}}</option>
          }
        </select>
      </label>

      <label>
        Endereço virtual:
        <input type="number" [(ngModel)]="virtual" placeholder="Ex: 1024" />
      </label>
      <button type="button" (click)="translate()">Traduzir</button>
    </div>

  <button (click)="toggleHistory()" class="btn">
    {{ showHistory ? 'Esconder histórico' : 'Ver histórico de traduções' }}
  </button>
  @if (showHistory) {
  <h4>Últimas traduções</h4>
  <table>
    <thead>
      <tr>
        <th>PID</th>
        <th>Virtual</th>
        <th>Página</th>
        <th>Offset</th>
        <th>Físico</th>
        <th>Hit?</th>
      </tr>
    </thead>
    <tbody>
      @for (a of history; track $index) {
      <tr>
        <td data-label="PID">{{a.pid ?? '-'}}</td>
        <td data-label="Virtual">{{a.virtual}}</td>
        <td data-label="Página">{{a.pageNumber}}</td>
        <td data-label="Offset">{{a.offset}}</td>
        <td data-label="Físico">{{a.physical}}</td>
        <td data-label="Hit?">{{a.hit ? '✔' : '✖'}}</td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
</div>
