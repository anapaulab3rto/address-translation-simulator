<div class="container">
  <header>
    <h1>Passo a Passo Para a tradução do endereço</h1>
  </header>
  <main>
    <section class="step">
      <h2>O que precisamos?</h2>
      <p>- Endereço Virtual ({{addr()}})</p>
      <p>- Page Table do processo</p>
      <p>- Tamanho da pagina ({{w()}}) </p>
      <p>- Espaço de endereçamento do processo ({{x()}})</p>
      <p>- Bits do endereço virtual ({{y()}})</p>
      <p></p>
    </section>
    <section class="step">
      <h2>Passo 1: Calcular o número de bits do endereço virtual</h2>ckcocl
      <p>como o espaço de endereçamento virtual do processo é {{x()}} by()tes, o endereço virtual é formado por {{y()}}
        bits
        (2^{{y()}} = {{x()}})</p>
      <p>Pois se o endereço tiver {{y()}} bits, então o número de combinações possíveis é: 2^{{y()}}
      <p>Cada combinação representa um endereço único.</p>
      <div class="address-visual">
        <div class="address-part page-number">{{vpn()}}</div>
        <div class="address-part offset">{{offset()}}</div>
      </div>
    </section>
    <section class="step">
      <h2>Passo 1: Separar a virtual page number(VPN) e o offset</h2>
      <p>O endereço virtual é dividido em um <strong>número de página (p)</strong> e um <strong>deslocamento
          (d)</strong>.</p>
      <p>como o espaço de endereçamento virtual do processo é {{x()}} b{{y()}}tes, o endereço virtual é formado por
        {{y()}}
        bits (2^{{y()}} = {{x()}})</p>
      <p>Pois se o endereço tiver {{y()}} bits, então o número de combinações possíveis é: 2^{{y()}}
      <p>Cada combinação representa um endereço único.</p>
      <p>Sabemos que a página tem {{w()}} b{{y()}}tes, em um espaço de endereçamento de {{x()}} b{{y()}}tes</p>
      <p>Portanto temos {{x()}}/{{w()}} páginas</p>
      <p>Para separar o VPN do Offset basta atribuir ao VPN a quantidade de bits necesários para representar a
        quantidade de páginas, o restante dos bits é o offset</p>
      <div class="address-visual">
        <div class="address-part page-number">{{vpn()}}</div>
        <div class="address-part offset">{{offset()}}</div>
      </div>
    </section>
    <section class="step">
      <h2>Passo 2: Verificar o frame number de onde a page está armazenada na memória</h2>
      <p>Acessamos o pageTable pelo VPN e verificamos o PageFrameNumber onde a Page está armazenada na memória</p>
      <div class="flow-diagram">
        <div class="element">Page Table</div>
        <div class="arrow">&rarr;</div>
        <div class="element table">Memória física</div>
      </div>
      <div>
        <table class="page-table">
          <thead>
            <tr>
              <th>Página</th>
              <th>Ativa</th>
              <th>Quadro</th>
            </tr>
          </thead>

          <tbody>
            <tr [class.row-invalid]="!(pte()?.valid)">
              <td data-label="Página">{{ vpn() }}</td>
              <td data-label="Válida">
                <span [class]="pte()?.valid ? 'status status-valid' : 'status status-invalid'">
                  {{ pte()?.valid ? 'Sim' : 'Não' }}
                </span>
              </td>
              <td data-label="Quadro">{{f !== undefined ? (f) : '-'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="step">
      <h2>Passo 2.5: Caso a pagina ainda não tenha um frame number atribuido</h2>
      <p>O page table entry() (PTE) correspondente não está na memória → page fault.</p>
      <p>O sistema operacional apenas procura um frame livre na memória.</p>

      <p>Porém se a memória física já está cheia (todos os frames ocupados).</p>
      <p>O SO precisa escolher uma página já carregada na memória para remover.</p>

      <p>Isso é a política de substituição de páginas (page replacement policy()).</p>
      <p>O frame da página vítima fica livre.</p>
      <p>A nova página é carregada para esse frame.</p>
      <p>A tabela de páginas é atualizada:</p>
      <p>Página nova → valid = true, frameNumber = (frame escolhido)</p>
      <p>Página vítima → valid = false</p>

    </section>

    <section class="step">
      <h2>Passo 3: Formação do Endereço Físico</h2>
      <p>O número do frame (f) é combinado com o offset ({{offset()}}) original para formar o endereço físico final.</p>
      <div class="address-visual">
        <div class="address-part frame-number">{{f()}}</div>
        <div class="address-part offset">{{offset()}}</div>
      </div>
    </section>
  </main>
</div>
